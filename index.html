<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¾è‚¡æˆæœ¬è¨ˆç®—æ©Ÿ</title>
    <style>
        :root {
            --primary-color: #0070f3;
            --bg-color: #f5f5f5;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
        }

        h1 {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
        }

        .input-group {
            margin-bottom: 1.2rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.9rem;
        }

        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box; /* ç¢ºä¿ padding ä¸æœƒæ’å¤§å¯¬åº¦ */
        }

        input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 112, 243, 0.1);
        }

        .divider {
            height: 1px;
            background-color: #eee;
            margin: 1.5rem 0;
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.8rem;
            font-size: 0.95rem;
        }

        .result-row.total {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--primary-color);
            margin-top: 10px;
        }

        .hint {
            font-size: 0.8rem;
            color: #888;
            margin-top: 1rem;
            text-align: center;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ‡ºğŸ‡¸ ç¾è‚¡æˆæœ¬è¨ˆç®—</h1>

        <div class="input-group">
            <label for="price">ç¾è‚¡è‚¡åƒ¹ (USD)</label>
            <input type="number" id="price" placeholder="ä¾‹å¦‚: 150.5" step="0.01">
        </div>

        <div class="input-group">
            <label for="shares">è‚¡æ•¸</label>
            <input type="number" id="shares" placeholder="ä¾‹å¦‚: 10" step="1">
        </div>

        <div class="input-group">
            <label for="feeRate">æ‰‹çºŒè²»ç‡ (%)</label>
            <input type="number" id="feeRate" value="0.25" step="0.01">
        </div>

        <div class="divider"></div>

        <div class="result-row">
            <span>è‚¡ç¥¨å¸‚å€¼</span>
            <span id="principal">$0.00</span>
        </div>
        <div class="result-row">
            <span>é ä¼°æ‰‹çºŒè²»</span>
            <span id="feeAmount">$0.00</span>
        </div>
        <div class="result-row total">
            <span>ç¸½æ”¯å‡ºæˆæœ¬</span>
            <span id="totalCost">$0.00</span>
        </div>
        <div class="result-row" style="color: #666; font-size: 0.85rem;">
            <span>æç›Šå…©å¹³åƒ¹ (æ¯è‚¡)</span>
            <span id="breakEven">$0.00</span>
        </div>
        
        <p class="hint">è¨»ï¼šæ­¤è¨ˆç®—æœªåŒ…å«äº¤æ˜“æ‰€è¦è²» (SEC Fee) æˆ–æœ€ä½æ‰‹çºŒè²»é™åˆ¶ã€‚</p>
    </div>

    <script>
        // ç²å– DOM å…ƒç´ 
        const priceInput = document.getElementById('price');
        const sharesInput = document.getElementById('shares');
        const feeRateInput = document.getElementById('feeRate');
        
        const principalDisplay = document.getElementById('principal');
        const feeAmountDisplay = document.getElementById('feeAmount');
        const totalCostDisplay = document.getElementById('totalCost');
        const breakEvenDisplay = document.getElementById('breakEven');

        // ç›£è½è¼¸å…¥äº‹ä»¶ï¼Œæ•¸å€¼æ”¹è®Šæ™‚è‡ªå‹•è¨ˆç®—
        [priceInput, sharesInput, feeRateInput].forEach(input => {
            input.addEventListener('input', calculate);
        });

        function calculate() {
            // è½‰ç‚ºæµ®é»æ•¸ï¼Œè‹¥ç„¡è¼¸å…¥å‰‡è¦–ç‚º 0
            const price = parseFloat(priceInput.value) || 0;
            const shares = parseFloat(sharesInput.value) || 0;
            const feeRate = parseFloat(feeRateInput.value) || 0;

            // 1. è¨ˆç®—è‚¡ç¥¨æœ¬é‡‘
            const principal = price * shares;

            // 2. è¨ˆç®—æ‰‹çºŒè²» (æœ¬é‡‘ * è²»ç‡ç™¾åˆ†æ¯”)
            // 0.25% æ„å‘³è‘— 0.0025ï¼Œæ‰€ä»¥è¦é™¤ä»¥ 100
            const fee = principal * (feeRate / 100);

            // 3. ç¸½æˆæœ¬
            const total = principal + fee;

            // 4. æç›Šå…©å¹³åƒ¹ (æ¯è‚¡æˆæœ¬)
            const breakEven = shares > 0 ? (total / shares) : 0;

            // æ›´æ–°ç•«é¢ (æ ¼å¼åŒ–ç‚ºç¾å…ƒè²¨å¹£æ ¼å¼)
            const formatter = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2
            });

            principalDisplay.textContent = formatter.format(principal);
            feeAmountDisplay.textContent = formatter.format(fee);
            totalCostDisplay.textContent = formatter.format(total);
            
            // æç›Šå…©å¹³åƒ¹é¡¯ç¤ºæ›´å¤šå°æ•¸é»ï¼Œç²¾æº–ä¸€é»
            breakEvenDisplay.textContent = `$${breakEven.toFixed(3)}`;
        }
    </script>
</body>
</html>
